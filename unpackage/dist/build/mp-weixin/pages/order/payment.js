(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/payment"],{"0519":function(e,t,n){},"0bff":function(e,t,n){},"0d0a":function(e,t,n){"use strict";(function(e,t){var u=n("4ea4");n("55e5");u(n("66fd"));var a=u(n("8d39"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},7126:function(e,t,n){"use strict";var u=n("0bff"),a=n.n(u);a.a},"8d39":function(e,t,n){"use strict";n.r(t);var u=n("c4d2"),a=n("9977");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("7126"),n("9ba1");var i=n("f0c5"),o=Object(i["a"])(a["default"],u["b"],u["c"],!1,null,"74b90cb2",null,!1,u["a"],void 0);t["default"]=o.exports},9977:function(e,t,n){"use strict";n.r(t);var u=n("df7d"),a=n.n(u);for(var r in u)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return u[e]}))}(r);t["default"]=a.a},"9ba1":function(e,t,n){"use strict";var u=n("0519"),a=n.n(u);a.a},c4d2:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return u}));var u={faNavbar:function(){return n.e("components/fa-navbar/fa-navbar").then(n.bind(null,"076e"))},uCellGroup:function(){return n.e("uview-ui/components/u-cell-group/u-cell-group").then(n.bind(null,"4b00"))},uRadioGroup:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-radio-group/u-radio-group")]).then(n.bind(null,"7b7c"))},uCellItem:function(){return n.e("uview-ui/components/u-cell-item/u-cell-item").then(n.bind(null,"d879"))},uRadio:function(){return n.e("uview-ui/components/u-radio/u-radio").then(n.bind(null,"7cf3"))},uGap:function(){return n.e("uview-ui/components/u-gap/u-gap").then(n.bind(null,"fea8"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"cec8"))},uSkeleton:function(){return n.e("uview-ui/components/u-skeleton/u-skeleton").then(n.bind(null,"8aa9"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,{backgroundColor:e.theme.bgColor,color:e.theme.color});e._isMounted||(e.e0=function(t){e.paytype="wechat"}),e.$mp.data=Object.assign({},{$root:{a0:n}})},r=[]},df7d:function(e,t,n){"use strict";(function(e,u){var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("2eee")),i=a(n("c973")),o={onLoad:function(e){this.backIndex=parseInt(e.index)||1,this.id=e.id||"",this.getOrder()},data:function(){return{backIndex:1,paytype:"wechat",id:"",order:{},loading:!0}},methods:{radioGroupChange:function(e){this.paytype=e},getOrder:function(){var t=this;this.$api.orderDetail({id:this.id}).then((function(n){n.code?(t.loading=!1,t.order=n.data):(t.$u.toast(n.msg),setTimeout((function(){n.data.project_id?t.$u.route("/pages/order/order"):e.navigateBack({delta:1})}),2e3))}))},submit:function(){var t=(0,i.default)(r.default.mark((function t(){var n,a,i=this;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={id:this.id,paytype:this.paytype},n.method="miniapp",t.next=4,this.$api.orderPay(n);case 4:if(a=t.sent,"bind"!=a.data){t.next=8;break}return this.$u.route("/pages/login/wxlogin"),t.abrupt("return");case 8:if(a.code){t.next=12;break}return this.$u.toast(a.msg),setTimeout((function(){e.navigateBack({delta:1})}),1e3),t.abrupt("return");case 12:e.requestPayment({provider:"wxpay",timeStamp:a.data.timeStamp,nonceStr:a.data.nonceStr,package:a.data.package,signType:a.data.signType,paySign:a.data.paySign,success:function(e){i.$u.toast("支付成功！"),u.requestSubscribeMessage({tmplIds:i.vuex_config.tpl_ids,complete:function(e){"requestSubscribeMessage:ok"==e.errMsg&&i.$api.subscribe({tpl_ids:e,orderid:i.order.orderid}).then((function(e){})),i.$u.route({type:"redirect",url:"/pages/order/houseorder"})}})},fail:function(e){"requestPayment:fail cancel"===e.errMsg?i.$u.toast("支付取消"):i.$u.toast("支付失败")}});case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}};t.default=o}).call(this,n("543d")["default"],n("bc2e")["default"])}},[["0d0a","common/runtime","common/vendor"]]]);