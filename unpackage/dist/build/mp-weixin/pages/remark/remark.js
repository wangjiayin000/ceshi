(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/remark/remark"],{1633:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={onLoad:function(e){this.order_id=e.id||"",this.getDetail()},data:function(){return{form:{comment__0:"",grade__0:5},rules:{comment__0:[{required:!0,message:"请输入评论内容",trigger:["change","blur"]},{min:5,message:"评论不能少于5个字",trigger:"change"}]},count:5,order_id:"",info:{}}},methods:{getDetail:function(){var e=this;this.$api.orderDetail({id:this.order_id}).then((function(n){n.code&&(e.info=n.data,1==e.info.type?e.info.source_data.forEach((function(n,t){e.form["grade__"+t]=5,e.form["comment__"+t]="",e.form["source_id__"+t]=n.goods_id,e.rules["comment__"+t]=[{required:!0,message:"请输入评论内容",trigger:["change","blur"]},{min:5,message:"评论不能少于5个字",trigger:"change"}]})):e.form["source_id__0"]=e.info.source_id,e.$nextTick((function(){e.$refs.uForm.setRules(e.rules)})))}))},submit:function(){var n=this;this.$refs.uForm.validate((function(t){if(t){if(!n.order_id)return void n.$u.toast("参数缺失！");var r={order_id:n.order_id},o=[];for(var u in n.form){var i=n.form[u],a=u.split("__");void 0==o[a[1]]&&o.push({comment:"",source_id:"",grade:5}),o[a[1]][a[0]]=i}r.remark=o,n.$api.addComment(r).then((function(t){n.$u.toast(t.msg),1==t.code&&setTimeout((function(){e.navigateBack({delta:1})}),1e3)}))}}))}}};n.default=t}).call(this,t("543d")["default"])},"1b91":function(e,n,t){"use strict";(function(e,n){var r=t("4ea4");t("55e5");r(t("66fd"));var o=r(t("4eca"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(o.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},"4eca":function(e,n,t){"use strict";t.r(n);var r=t("a550"),o=t("705a");for(var u in o)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(u);var i=t("f0c5"),a=Object(i["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);n["default"]=a.exports},"705a":function(e,n,t){"use strict";t.r(n);var r=t("1633"),o=t.n(r);for(var u in r)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(u);n["default"]=o.a},a550:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return r}));var r={faNavbar:function(){return t.e("components/fa-navbar/fa-navbar").then(t.bind(null,"076e"))},uForm:function(){return t.e("uview-ui/components/u-form/u-form").then(t.bind(null,"cb7ff"))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,"b721"))},uRate:function(){return t.e("uview-ui/components/u-rate/u-rate").then(t.bind(null,"8216"))},uInput:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-input/u-input")]).then(t.bind(null,"4cfe"))},uButton:function(){return t.e("uview-ui/components/u-button/u-button").then(t.bind(null,"cec8"))}},o=function(){var e=this.$createElement,n=(this._self._c,{backgroundColor:this.theme.bgColor,color:this.theme.color});this.$mp.data=Object.assign({},{$root:{a0:n}})},u=[]}},[["1b91","common/runtime","common/vendor"]]]);