(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/wxlogin"],{"0c8b":function(t,e,n){"use strict";(function(t,e){var u=n("4ea4");n("55e5");u(n("66fd"));var a=u(n("a5ca"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"2a0a":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return u}));var u={faNavbar:function(){return n.e("components/fa-navbar/fa-navbar").then(n.bind(null,"076e"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"cec8"))},uTopTips:function(){return n.e("uview-ui/components/u-top-tips/u-top-tips").then(n.bind(null,"c36b"))}},a=function(){var t=this.$createElement,e=(this._self._c,{width:"95%",backgroundColor:this.theme.bgColor,color:this.theme.color});this.$mp.data=Object.assign({},{$root:{a0:e}})},r=[]},"6efd":function(t,e,n){"use strict";var u=n("a582"),a=n.n(u);a.a},a582:function(t,e,n){},a5ca:function(t,e,n){"use strict";n.r(e);var u=n("2a0a"),a=n("b11b");for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("6efd");var i=n("f0c5"),o=Object(i["a"])(a["default"],u["b"],u["c"],!1,null,null,null,!1,u["a"],void 0);e["default"]=o.exports},b11b:function(t,e,n){"use strict";n.r(e);var u=n("f699"),a=n.n(u);for(var r in u)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return u[t]}))}(r);e["default"]=a.a},f699:function(t,e,n){"use strict";(function(t,u){var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("2eee")),i=a(n("c973")),o=n("9dab"),c={mixins:[o.loginfunc],data:function(){return{}},methods:{handleRefuse:function(){this.$u.toast("未授权"),setTimeout((function(){t.navigateBack({delta:1})}),1e3)},getCode:function(){var e=(0,i.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.login({success:function(t){t.code?e(t.code):n("未取得code")},fail:function(t){n("用户授权失败wx.login")}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getUserInfo:function(){var t=this;u.getUserProfile({lang:"zh",desc:"用户信息绑定",success:function(){var e=(0,i.default)(r.default.mark((function e(n){var u,a;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,t.getCode();case 4:u=e.sent,a={code:u,rawData:n.userInfo,__token__:t.vuex__token__},t.vuex_invitecode&&(a.invite_id=t.vuex_invitecode),t.toLogin(a),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$u.toast(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),fail:function(e){t.$u.toast(JSON.stringify(e))}})},toLogin:function(){var t=(0,i.default)(r.default.mark((function t(e){var n,u,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.gowxLogin(e);case 2:if(n=t.sent,n.code){t.next=6;break}return this.$u.toast(n.msg),t.abrupt("return");case 6:if(!n.data.user){t.next=13;break}return this.$u.vuex("vuex_token",n.data.user.token),this.$u.vuex("vuex_user",n.data.user||{}),u=getCurrentPages(),a=u.length>2&&u[u.length-2].route.indexOf("mobilelogin")>-1?2:1,this.success(a),t.abrupt("return");case 13:this.$u.vuex("vuex_third",n.data.third),this.$u.route("/pages/login/register?bind=bind");case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}};e.default=c}).call(this,n("543d")["default"],n("bc2e")["default"])}},[["0c8b","common/runtime","common/vendor"]]]);