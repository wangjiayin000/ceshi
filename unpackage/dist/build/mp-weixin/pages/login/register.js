(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/register"],{2361:function(e,t,n){"use strict";n.r(t);var i=n("570f"),u=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=u.a},"2ce5":function(e,t,n){"use strict";n.r(t);var i=n("72fa"),u=n("2361");for(var r in u)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return u[e]}))}(r);n("ba2e");var o=n("f0c5"),s=Object(o["a"])(u["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=s.exports},"570f":function(e,t,n){"use strict";(function(e){var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=i(n("2eee")),r=i(n("c973")),o=n("9dab"),s={mixins:[o.loginfunc],onLoad:function(e){e.invite_id&&this.$u.vuex("vuex_invite_id",e.invite_id),this.is_bind=e.bind||"",this.is_bind||(this.labelPosition="left",this.rules.username=[{required:!0,message:"请输入用户名",trigger:["change","blur"]}],this.rules.password=[{required:!0,message:"请输入密码",trigger:"change"}])},onReady:function(){this.is_bind||this.$refs.uForm.setRules(this.rules)},watch:{is_wx_phone:function(e,t){var n=this;e||this.$nextTick((function(){n.$refs.uForm.setRules(n.rules)}))}},data:function(){var e=this;return{is_bind:"",is_wx_phone:!0,agreeChecked:!1,labelPosition:"top",border:!1,form:{username:"",password:"",mobile:"",code:""},rules:{mobile:[{required:!0,message:"请输入手机号码",trigger:"change"},{validator:function(t,n,i){return e.$u.test.mobile(n)},message:"手机号码不正确",trigger:["change","blur"]}],code:[{required:!0,message:"请输入短信验证码",trigger:"change"}]},codeTips:"",errorType:["message"]}},methods:{codeChange:function(e){this.codeTips=e},getCode:function(){var e=(0,r.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$u.test.mobile(this.form.mobile)){e.next=3;break}return this.$u.toast("手机号码格式不正确！"),e.abrupt("return");case 3:if(!this.$refs.uCode.canGetCode){e.next=11;break}return e.next=6,this.$api.getSmsSend({mobile:this.form.mobile,event:this.is_bind?"bind":"register"});case 6:t=e.sent,this.$u.toast(t.msg),1==t.code&&this.$refs.uCode.start(),e.next=12;break;case 11:this.$u.toast("倒计时结束后再发送");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),register:function(){var e=this;this.agreeChecked?this.$refs.uForm.validate((function(t){t?e.is_bind?e.goBind():e.goReg():e.$u.toast("验证失败")})):this.$refs.uToast.show({title:"请阅读并同意遵守《用户协议》",type:"error"})},goReg:function(){var e=(0,r.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.vuex_invite_id&&(this.form.invite_id=this.vuex_invite_id),e.next=3,this.$api.goRegister(this.form);case 3:if(t=e.sent,t.code){e.next=7;break}return this.$u.toast(t.msg),e.abrupt("return");case 7:this.$u.vuex("vuex_token",t.data.token),this.$u.vuex("vuex_user",t.data.user||{}),this.success(3);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getPhoneNumber:function(t){if(this.agreeChecked){var n=this;e.login({provider:"weixin",success:function(e){n.$api.getWechatMobile({encryptedData:t.detail.encryptedData,iv:t.detail.iv,code:e.code}).then((function(e){1==e.code?(n.$u.vuex("vuex_token",e.data.token),n.success(3)):n.$u.toast(e.msg)}))},fail:function(e){}})}else this.$refs.uToast.show({title:"请阅读并同意遵守《用户协议》",type:"error"})},goBind:function(){var e=(0,r.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.goThirdAccount(this.form);case 2:if(t=e.sent,t.code){e.next=6;break}return this.$u.toast(t.msg),e.abrupt("return");case 6:2,3,t.data.userinfo&&(this.$u.vuex("vuex_token",t.data.userinfo.token),this.success(3));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}};t.default=s}).call(this,n("543d")["default"])},"72fa":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var i={faNavbar:function(){return n.e("components/fa-navbar/fa-navbar").then(n.bind(null,"076e"))},uAvatar:function(){return n.e("uview-ui/components/u-avatar/u-avatar").then(n.bind(null,"f2fb"))},uForm:function(){return n.e("uview-ui/components/u-form/u-form").then(n.bind(null,"cb7ff"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"b721"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-input/u-input")]).then(n.bind(null,"4cfe"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"cec8"))},uCheckbox:function(){return n.e("uview-ui/components/u-checkbox/u-checkbox").then(n.bind(null,"adda"))},uVerificationCode:function(){return n.e("uview-ui/components/u-verification-code/u-verification-code").then(n.bind(null,"1ffa"))},uToast:function(){return n.e("uview-ui/components/u-toast/u-toast").then(n.bind(null,"2f4a"))}},u=function(){var e=this,t=e.$createElement,n=(e._self._c,e.is_wx_phone&&e.is_bind?null:{backgroundColor:e.theme.bgColor,color:e.theme.color}),i=e.is_wx_phone&&e.is_bind?null:{backgroundColor:e.theme.bgColor,color:e.theme.color},u=e.is_bind&&e.is_wx_phone?{backgroundColor:e.theme.bgColor,color:e.theme.color}:null;e._isMounted||(e.e0=function(t){e.is_wx_phone=!e.is_wx_phone}),e.$mp.data=Object.assign({},{$root:{a0:n,a1:i,a2:u}})},r=[]},"98cd":function(e,t,n){"use strict";(function(e,t){var i=n("4ea4");n("55e5");i(n("66fd"));var u=i(n("2ce5"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(u.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},ba2e:function(e,t,n){"use strict";var i=n("c398"),u=n.n(i);u.a},c398:function(e,t,n){}},[["98cd","common/runtime","common/vendor"]]]);