(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/hotel/detail"],{"23dd":function(t,n,e){"use strict";(function(t,n){var i=e("4ea4");e("55e5");i(e("66fd"));var o=i(e("c022"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(o.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},"39c3":function(t,n,e){"use strict";e.r(n);var i=e("9956"),o=e.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(a);n["default"]=o.a},6718:function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return i}));var i={faNavbar:function(){return e.e("components/fa-navbar/fa-navbar").then(e.bind(null,"076e"))},uIcon:function(){return e.e("uview-ui/components/u-icon/u-icon").then(e.bind(null,"f2bf"))},uSwiper:function(){return e.e("uview-ui/components/u-swiper/u-swiper").then(e.bind(null,"cb33"))},uTabs:function(){return Promise.all([e.e("common/vendor"),e.e("uview-ui/components/u-tabs/u-tabs")]).then(e.bind(null,"38c8"))},uTag:function(){return e.e("uview-ui/components/u-tag/u-tag").then(e.bind(null,"7d7d"))},uRate:function(){return e.e("uview-ui/components/u-rate/u-rate").then(e.bind(null,"8216"))},uParse:function(){return Promise.all([e.e("common/vendor"),e.e("uview-ui/components/u-parse/u-parse")]).then(e.bind(null,"1aca"))},faFields:function(){return e.e("components/fa-fields/fa-fields").then(e.bind(null,"8e9d"))},uButton:function(){return e.e("uview-ui/components/u-button/u-button").then(e.bind(null,"cec8"))},faCalendar:function(){return e.e("components/fa-calendar/fa-calendar").then(e.bind(null,"cf53"))},faShare:function(){return e.e("components/fa-share/fa-share").then(e.bind(null,"d331"))},faPoster:function(){return Promise.all([e.e("common/vendor"),e.e("components/fa-poster/fa-poster")]).then(e.bind(null,"5bb3"))},faCoupon:function(){return e.e("components/fa-coupon/fa-coupon").then(e.bind(null,"128a"))},uSkeleton:function(){return e.e("uview-ui/components/u-skeleton/u-skeleton").then(e.bind(null,"8aa9"))}},o=function(){var t=this,n=t.$createElement,e=(t._self._c,t.__get_style([t.stickyStyle])),i=t.info.coupon&&t.info.coupon.length>0,o=t.commentList.length,a=t.__map(t.commentList,(function(n,e){var i=t.__get_orig(n),o=n.replay.length,a=o?n.replay.length:null,u=t._f("timeFrom")(n.createtime,"yyyy-mm-dd");return{$orig:i,g2:o,g3:a,f0:u}})),u=t.commentList.length,s=t.__map(t.info.facility,(function(n,e){var i=t.__get_orig(n),o=t.hasFacility.indexOf(n.name);return{$orig:i,g5:o}})),c=t._f("formatTimes")(t.info.checkin_time),r=t._f("formatTimes")(t.info.checkout_time),l=t.loading?null:{backgroundColor:t.theme.bgColor,color:t.theme.color};t._isMounted||(t.e0=function(n){t.showShare=!0},t.e1=function(n){t.show_coupon=!0},t.e2=function(n){t.value=!0},t.e3=function(n){t.showPoster=!0}),t.$mp.data=Object.assign({},{$root:{s0:e,g0:i,g1:o,l0:a,g4:u,l1:s,f1:c,f2:r,a0:l}})},a=[]},9956:function(t,n,e){"use strict";(function(t,e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={mixins:[],onLoad:function(n){this.id=n.id||"",this.id||(this.$u.toast("参数错误"),setTimeout((function(){t.navigateBack({delta:1})}),1e3));var i=n.invite_id||"";if(n.scene){var o=decodeURIComponent(n.scene),a=this.$util.getQueryString("id",o);a&&(this.id=a),i=this.$util.getQueryString("invite_id",o)||i}i&&this.$u.vuex("vuex_invite_id",i);this.$u.sys();var u=e.getMenuButtonBoundingClientRect();this.stickyTop=u.top+40,this.getDetail(),this.getCommentList()},onShow:function(){this.is_first&&(this.getDetail(),this.getCommentList()),this.is_first=!0},computed:{stickyStyle:function(){var t={};return this.scrollTop>150?(t.position="fixed",t.width="100%",t.top=this.stickyTop+"px",t.left=0,t.zIndex=999,this.marginTop=90):this.marginTop=0,t}},data:function(){return{showShare:!1,showPoster:!1,is_first:!1,value:!1,scrollTop:0,stickyTop:0,tabList:[{name:"介绍",tag:"intro"},{name:"位置",tag:"map"},{name:"评价",count:0,tag:"comment"},{name:"设施",tag:"facility"}],current:0,loading:!0,marginTop:0,gapHeight:150,id:"",commentList:[],into:"",info:{},calendar:{},hasFacility:[],tags:[],markers:[],show_coupon:!1}},methods:{getDetail:function(){var n=this;this.$api.houseDetail({id:this.id}).then((function(e){if(1==e.code){n.info=e.data,n.info.image=n.info.images.length?n.info.images[0]:"",n.info.store&&(n.markers=[{id:0,latitude:parseFloat(n.info.store.latitude),longitude:parseFloat(n.info.store.longitude),iconPath:"../../static/map.png",address:n.info.store.address,callout:{content:n.info.store.name,padding:10,borderRadius:5,bgColor:"#F24E4E",color:n.theme.color,display:"ALWAYS"}}]),e.data.group_names&&e.data.group_names.facility&&(n.hasFacility=e.data.group_names.facility),e.data.group_names&&e.data.group_names.tag&&(n.tags=e.data.group_names.tag),n.loading=!1;var i=n;n.$nextTick((function(){var n=t.createSelectorQuery().in(this);n.select("#footbar").boundingClientRect((function(t){t&&(i.gapHeight=t.height?t.height+5:110)})).exec()})),n.$u.mpShare={title:n.info.name,path:"/pages/hotel/detail?id="+n.id,imageUrl:n.info&&n.info.images.length>0?n.info.images[0]:""}}else n.$u.toast(e.msg)}))},change:function(t){this.current=t,this.into=this.tabList[t].tag},calendarConfirm:function(t){this.calendar=t},collect:function(t,n){var e=this;this.$api.optionCollect({source_id:t,type:0}).then((function(t){t.code?n?(e.$u.toast("取消收藏成功"),e.$set(e.info,"isCollect",0)):(e.$u.toast("添加收藏成功"),e.$set(e.info,"isCollect",1)):e.$u.toast(t.msg)}))},getCommentList:function(){var t=this;this.$api.commentList({type:0,source_id:this.id}).then((function(n){1==n.code&&(t.commentList=n.data.data,t.tabList[2].count=n.data.total)}))},upper:function(){},lower:function(){},scrolls:function(t){this.scrollTop=t.detail.scrollTop},markerClick:function(){t.openLocation({latitude:this.markers[0].latitude,longitude:this.markers[0].longitude,name:this.markers[0].callout.content,address:this.markers[0].address,success:function(){},complete:function(t){}})},toBooking:function(){"{}"!=JSON.stringify(this.calendar)?this.goPage("/pages/hotel/booking?id="+this.id+"&start_time="+this.calendar.start+"&end_time="+this.calendar.end):this.$u.toast("请选择入住和离店日期")}}};n.default=i}).call(this,e("543d")["default"],e("bc2e")["default"])},c022:function(t,n,e){"use strict";e.r(n);var i=e("6718"),o=e("39c3");for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(a);e("f5c0"),e("dd4c");var u=e("f0c5"),s=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"fb8ed1be",null,!1,i["a"],void 0);n["default"]=s.exports},ccc9:function(t,n,e){},d10d:function(t,n,e){},dd4c:function(t,n,e){"use strict";var i=e("d10d"),o=e.n(i);o.a},f5c0:function(t,n,e){"use strict";var i=e("ccc9"),o=e.n(i);o.a}},[["23dd","common/runtime","common/vendor"]]]);