(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/order"],{"3e82":function(n,t,e){"use strict";var u=e("f411"),o=e.n(u);o.a},4271:function(n,t,e){"use strict";e.r(t);var u=e("f064"),o=e.n(u);for(var i in u)["default"].indexOf(i)<0&&function(n){e.d(t,n,(function(){return u[n]}))}(i);t["default"]=o.a},"543a":function(n,t,e){"use strict";e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){return u}));var u={faNavbar:function(){return e.e("components/fa-navbar/fa-navbar").then(e.bind(null,"076e"))},uNumberBox:function(){return e.e("uview-ui/components/u-number-box/u-number-box").then(e.bind(null,"3c3d"))},uForm:function(){return e.e("uview-ui/components/u-form/u-form").then(e.bind(null,"cb7ff"))},uFormItem:function(){return Promise.all([e.e("common/vendor"),e.e("uview-ui/components/u-form-item/u-form-item")]).then(e.bind(null,"b721"))},uInput:function(){return Promise.all([e.e("common/vendor"),e.e("uview-ui/components/u-input/u-input")]).then(e.bind(null,"4cfe"))},uButton:function(){return e.e("uview-ui/components/u-button/u-button").then(e.bind(null,"cec8"))},uIcon:function(){return e.e("uview-ui/components/u-icon/u-icon").then(e.bind(null,"f2bf"))},uGap:function(){return e.e("uview-ui/components/u-gap/u-gap").then(e.bind(null,"fea8"))},faCoupon:function(){return e.e("components/fa-coupon/fa-coupon").then(e.bind(null,"128a"))},uSelect:function(){return e.e("uview-ui/components/u-select/u-select").then(e.bind(null,"fb71"))},faTabbar:function(){return Promise.all([e.e("common/vendor"),e.e("components/fa-tabbar/fa-tabbar")]).then(e.bind(null,"07a5"))}},o=function(){var n=this,t=n.$createElement,e=(n._self._c,n.couponList.length),u={width:"220rpx",backgroundColor:n.theme.bgColor,color:n.theme.color};n._isMounted||(n.e0=function(t){n.show=!0},n.e1=function(t){n.show_coupon=!0}),n.$mp.data=Object.assign({},{$root:{g0:e,a0:u}})},i=[]},6646:function(n,t,e){},c2b9:function(n,t,e){"use strict";(function(n,t){var u=e("4ea4");e("55e5");u(e("66fd"));var o=u(e("d194"));n.__webpack_require_UNI_MP_PLUGIN__=e,t(o.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},c5e7:function(n,t,e){"use strict";var u=e("6646"),o=e.n(u);o.a},d194:function(n,t,e){"use strict";e.r(t);var u=e("543a"),o=e("4271");for(var i in o)["default"].indexOf(i)<0&&function(n){e.d(t,n,(function(){return o[n]}))}(i);e("3e82"),e("c5e7");var r=e("f0c5"),s=Object(r["a"])(o["default"],u["b"],u["c"],!1,null,"2f865026",null,!1,u["a"],void 0);t["default"]=s.exports},f064:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u={onLoad:function(n){this.cart_ids=n.id,this.sceneval=n.sceneval,this.getCartIndex(),this.houseSelect()},computed:{totalNums:function(){return this.list.reduce((function(n,t){return n+parseInt(t.nums)}),0)},goodsAmount:function(){return this.list.reduce((function(n,t){return n+parseInt(t.cart_nums)*parseFloat(t.goods&&t.goods.price||0)}),0)},totalPrice:function(){var n=this.goodsAmount;return n?(this.coupon.id&&(1==this.coupon.result?n-=this.coupon.result_data.number:n=n*this.coupon.result_data.number/10),n.toFixed(2)):0},couponPrice:function(){var n=0;return this.coupon.id&&(n=1==this.coupon.result?parseFloat(this.coupon.result_data.number):this.goodsAmount*(10-this.coupon.result_data.number)/10),n.toFixed(2)}},data:function(){return{show:!1,cart_ids:"",list:[],memo:"",house_number:"",sceneval:1,house:[],couponList:[],show_coupon:!1,coupon:{}}},methods:{getCartIndex:function(){var n=this;this.$api.getCartIndex({id:this.cart_ids,sceneval:this.sceneval,order:1}).then((function(t){t.code?(t.data.list.map((function(n){n.checked=!1,n.cart_nums=n.nums})),t.data.list.map((function(n){n.cart_nums=n.nums})),n.list=t.data.list,n.couponList=t.data.coupons,n.house_number=t.data.house&&t.data.house.room||""):n.$u.toast(t.msg)}))},houseSelect:function(){var n=this;this.$api.houseSelect().then((function(t){t.code?n.house=t.data.map((function(n){return{value:n.room,label:n.name&&n.name.length>=15?n.name.substr(0,15)+"... ("+n.room+")":n.name+"("+n.room+")"}})):n.$u.toast(t.msg)}))},confirm:function(n){this.house_number=n[0].value},setCartNum:function(n){var t=this,e=n.index,u=n.value;this.$api.setCartNums({id:this.list[e].id,nums:u}).then((function(n){n.code?t.$set(t.list[e],"nums",t.list[e].cart_nums):setTimeout((function(){t.$u.toast(n.msg),t.$set(t.list[e],"cart_nums",t.list[e].nums)}),100)}))},success:function(n){this.coupon=n},add:function(){var n=this;if(this.list.length){var t={id:this.cart_ids,user_coupon_id:this.coupon.user_coupon_id||"",house_number:this.house_number,memo:this.memo,type:1};this.$api.addOrder(t).then((function(t){t.code?n.goPage("/pages/order/payment?index=3&id="+t.data.id):n.$u.toast(t.msg)}))}}}};t.default=u},f411:function(n,t,e){}},[["c2b9","common/runtime","common/vendor"]]]);